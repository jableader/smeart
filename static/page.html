<html>
<head>
	<title>Smeart Systems!</title>
	<style type="text/css">
	button {
		width: 50%;
		height: 4em;
		margin: 0.5em;
	}
	
	span {
		font-size: 1.2em;
	}
	
	body {
		font-size: 1.1em;
	}

	</style>
	<script type="text/javascript" src="/static/jquery.js"></script>
</head>

<body>
	<img src="static/header.png" style="width: 101%; overflow-x: hidden; max-height: 60%;"/>
	
	<div style="width:45%; float: left;">		
		Inside Temp: <span id="lblInside">Unknown</span> <br />
		<button id="btnClose">Close</button>
	</div>
	<div style="width: 45%; float: right; text-align: right;">
		Outside Temp: <span id="lblOutside">Unknown</span> <br />
		<button id="btnOpen">Open</button>
	</div>
	
	<br />
	
	<script type="text/javascript">
	
	var setState = function(state) {
		$.post("/state", {"state": state}, function(response){
			console.log("Success: " + response);
			updateValues();
		});
	};
	
	$('#btnOpen').click(function() {
		setState('open');
	});
	
	$('#btnClose').click(function() {
		setState('closed');
	});
	
	var formatTemp = function(t){
		return t == null ? "Unknown" : t + "Â°";
	}
		
	var updateValues = function() {
		$.getJSON('/state', function(data){
			console.log("Updating values " + data);
			$('#lblInside').html(formatTemp(data.indoorTemp));
			$('#lblOutside').html(formatTemp(data.outdoorTemp));
		});
	}
	
	setInterval(updateValues, 1000);

	</script>
	
</body>
</html>
